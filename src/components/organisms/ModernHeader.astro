---
import Logo from '../atoms/Logo.astro';
import ModernButton from '../atoms/ModernButton.astro';
import { Icon } from 'astro-icon/components';

const currentPath = Astro.url.pathname;

const navItems = [
  { href: '/', label: 'Home' },
  { href: '/about', label: 'About' },
  { href: '/#brand-collaboration', label: 'Private Label' },
  { href: '/#product-development', label: 'Manufacturing' },
  { href: '/#sustainability', label: 'Sustainability' },
  { href: '/contact', label: 'Contact' },
];
---

<header class="fixed top-0 z-50 w-full glass-light border-b border-gray-200">
  <nav class="site-container">
    <div class="flex items-center justify-between py-4">
      <Logo class="h-12 md:h-14" />

      <!-- Desktop Navigation -->
      <div class="hidden md:flex items-center gap-8">
        <div class="flex items-center gap-1">
          {
            navItems.map((item) => (
              <a
                href={item.href}
                class={`
                px-4 py-2 rounded-lg transition-all duration-200 font-medium
                ${currentPath === item.href
                  ? 'bg-primary/10 text-primary'
                  : 'text-gray-700 hover:bg-gray-100'}
              `}
              >
                {item.label}
              </a>
            ))
          }
        </div>

        <ModernButton href="/contact" variant="gradient" size="sm" arrow="right">
          Get Started
        </ModernButton>
      </div>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="md:hidden p-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"
        aria-label="Toggle menu"
      >
        <Icon name="tabler/menu-2" class="w-6 h-6" />
      </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="md:hidden hidden pb-4">
      <div class="glass-light rounded-xl p-4 space-y-2">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class={`
              block px-4 py-3 rounded-lg transition-all duration-200 font-medium
              ${currentPath === item.href ? 'bg-primary/10 text-primary' : 'text-gray-700 hover:bg-gray-100'}
            `}
            >
              {item.label}
            </a>
          ))
        }
        <div class="pt-4 border-t border-gray-200">
          <ModernButton href="/contact" variant="gradient" size="sm" class="w-full" arrow="right">
            Get Started
          </ModernButton>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  mobileMenuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
    if (!mobileMenuBtn?.contains(e.target as Node) && !mobileMenu?.contains(e.target as Node)) {
      mobileMenu?.classList.add('hidden');
    }
  });
</script>
