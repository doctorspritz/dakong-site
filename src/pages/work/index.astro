---
import Layout from '../../layouts/Layout.astro';
import Heading from '../../components/atoms/Heading.astro';

const posts = Object.entries(
  import.meta.glob(['./*.md', './*.mdx'], { eager: true })
)
  .map(([path, mod]: any) => ({
    path,
    url: path.replace('./', '/work/').replace(/\.(md|mdx)$/, ''),
    frontmatter: mod.frontmatter || {},
  }))
  .sort((a, b) => (a.frontmatter.order || 0) - (b.frontmatter.order || 0));
---

<Layout title="Work">
  <section class="section-padding">
    <div class="site-container">
      <Heading as="h1" class="mb-6">Selected Work</Heading>
      <p class="text-lg text-gray-700 mb-10 max-w-3xl">
        A look at how we take ideas from concept to shelf â€” balancing creativity, safety, cost, and
        timelines.
      </p>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.map(({ url, frontmatter }) => (
          <a href={url} class="block bg-white rounded-xl shadow hover:shadow-md transition-shadow p-6">
            <h3 class="text-xl font-bold mb-2">{frontmatter.title || 'Case Study'}</h3>
            <p class="text-gray-700">{frontmatter.summary || 'Project overview'}</p>
            <div class="mt-3 text-sm text-gray-500">{frontmatter.kpis || ''}</div>
          </a>
        ))}
      </div>
    </div>
  </section>
</Layout>
